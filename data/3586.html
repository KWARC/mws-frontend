<html> 
      <head>
        <title>GAP (ref) - Chapter 4: The Programming Language &amp;#8614; 4.20 For</title>
        <meta name="url" content="http://www.gap-system.org/Manuals/doc/ref/chap4_mj.html#X78783E777867638A"></meta>
      </head>
      <body> <h4 xmlns="http://www.w3.org/1999/xhtml">4.20 <span class="Heading">For</span></h4><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">simple-var</var> in <var class="Arg">list-expr</var> do <var class="Arg">statements</var> od;</code></p><p xmlns="http://www.w3.org/1999/xhtml">The <code class="keyw">for</code> loop executes the statement sequence <var class="Arg">statements</var> for every element of the list <var class="Arg">list-expr</var>.</p><p xmlns="http://www.w3.org/1999/xhtml">The statement sequence <var class="Arg">statements</var> is first executed with <var class="Arg">simple-var</var> bound to the first element of the list <var class="Arg">list-expr</var>, then with <var class="Arg">simple-var</var> bound to the second element of <var class="Arg">list-expr</var> and so on. <var class="Arg">simple-var</var> must be a simple variable, it must not be a list element selection <code class="code"><var class="Arg">list-var</var>[<var class="Arg">int-expr</var>]</code> or a record component selection <code class="code"><var class="Arg">record-var</var>.<var class="Arg">ident</var></code>.</p><p xmlns="http://www.w3.org/1999/xhtml">The execution of the <code class="keyw">for</code> loop over a list is exactly equivalent to the following <code class="keyw">while</code> loop.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
loop_list := list;
loop_index := 1;
while loop_index &lt;= Length(loop_list) do
  variable := loop_list[loop_index];
  statements
  loop_index := loop_index + 1;
od;
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">with the exception that &quot;loop_list&quot; and &quot;loop_index&quot; are different variables for each <code class="keyw">for</code> loop, i.e., these variables of different <code class="keyw">for</code> loops do not interfere with each other.</p><p xmlns="http://www.w3.org/1999/xhtml">The list <var class="Arg">list-expr</var> is very often a range (see <a shape="rect" href="chap21_mj.html#X79596BDE7CAF8491"><span class="RefLink">21.22</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> in [<var class="Arg">from</var>..<var class="Arg">to</var>] do <var class="Arg">statements</var> od;</code></p><p xmlns="http://www.w3.org/1999/xhtml">corresponds to the more common</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> from <var class="Arg">from</var> to <var class="Arg">to</var> do <var class="Arg">statements</var> od;</code></p><p xmlns="http://www.w3.org/1999/xhtml">in other programming languages.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">s := 0;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">for i in [1..100] do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   s := s + i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">od;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">s;</span>
5050
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Note in the following example how the modification of the <em>list</em> in the loop body causes the loop body also to be executed for the new values.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">l := [ 1, 2, 3, 4, 5, 6 ];;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">for i in l do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   Print( i, &quot; &quot; );</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   if i mod 2 = 0 then Add( l, 3 * i / 2 ); fi;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">od; Print( &quot;\n&quot; );</span>
1 2 3 4 5 6 3 6 9 9 
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">l;</span>
[ 1, 2, 3, 4, 5, 6, 3, 6, 9, 9 ]
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Note in the following example that the modification of the <em>variable</em> that holds the list has no influence on the loop.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">l := [ 1, 2, 3, 4, 5, 6 ];;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">for i in l do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   Print( i, &quot; &quot; );</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   l := [];</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">od; Print( &quot;\n&quot; );</span>
1 2 3 4 5 6 
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">l;</span>
[  ]
</pre></div><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> in <var class="Arg">iterator</var> do <var class="Arg">statements</var> od;</code></p><p xmlns="http://www.w3.org/1999/xhtml">It is also possible to have a <code class="keyw">for</code>-loop run over an iterator (see <a shape="rect" href="chap30_mj.html#X85A3F00985453F95"><span class="RefLink">30.8</span></a>). In this case the <code class="keyw">for</code>-loop is equivalent to</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
while not IsDoneIterator(iterator) do
  variable := NextIterator(iterator)
  statements
od;
</pre></div><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> in <var class="Arg">object</var> do <var class="Arg">statements</var> od;</code></p><p xmlns="http://www.w3.org/1999/xhtml">Finally, if an object <var class="Arg">object</var> which is not a list or an iterator appears in a <code class="keyw">for</code>-loop, then <strong class="pkg">GAP</strong> will attempt to evaluate the function call <code class="code">Iterator(<var class="Arg">object</var>)</code>. If this is successful then the loop is taken to run over the iterator returned.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">g := Group((1,2,3,4,5),(1,2)(3,4)(5,6));</span>
Group([ (1,2,3,4,5), (1,2)(3,4)(5,6) ])
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">count := 0;; sumord := 0;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">for x in g do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">count := count + 1; sumord := sumord + Order(x); od;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">count;</span>
120
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">sumord;</span>
471
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">The effect of</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> in <var class="Arg">domain</var> do</code></p><p xmlns="http://www.w3.org/1999/xhtml">should thus normally be the same as</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="code">for <var class="Arg">variable</var> in AsList(<var class="Arg">domain</var>) do</code></p><p xmlns="http://www.w3.org/1999/xhtml">but may use much less storage, as the iterator may be more compact than a list of all the elements.</p><p xmlns="http://www.w3.org/1999/xhtml">See <a shape="rect" href="chap30_mj.html#X85A3F00985453F95"><span class="RefLink">30.8</span></a> for details about iterators.</p><p xmlns="http://www.w3.org/1999/xhtml">A <code class="keyw">for</code> loop may be left prematurely using <code class="keyw">break</code>, see <a shape="rect" href="chap4_mj.html#X7B60C6127E183021"><span class="RefLink">4.21</span></a>. This combines especially well with a loop over an iterator, as a way of searching through a domain for an element with some useful property.</p> </body>
    </html>