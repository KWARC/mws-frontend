<html> 
      <head>
        <title>GAP (ref) - Chapter 80: Examples of Extending the System-&gt;80.5 Adding a new Attribute</title>
        <meta name="url" content="http://www.gap-system.org/Manuals/doc/ref/chap80.html#X874AF11D864AEC1B"></meta>
      </head>
      <body> <h4 xmlns="http://www.w3.org/1999/xhtml">80.5 <span class="Heading">Adding a new Attribute</span></h4><p xmlns="http://www.w3.org/1999/xhtml">Now we look at an example of how to add a new attribute. As example we consider the set of all primes that divide the size of a group.</p><p xmlns="http://www.w3.org/1999/xhtml">First we have to declare the attribute:</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
PrimesDividingSize:=NewAttribute(&quot;PrimesDividingSize&quot;,IsGroup);
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">(SeeÂ <code class="func">NewAttribute</code> (<a shape="rect" href="chap79_mj.html#X7B9654807858A3B0"><span class="RefLink">79.3-1</span></a>)). This implicitly declares attribute tester and setter, it is convenient however to assign these to variables as well:</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
HasPrimesDividingSize:=Tester(PrimesDividingSize);
SetPrimesDividingSize:=Setter(PrimesDividingSize);
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Alternatively, there is a declaration command <code class="func">DeclareAttribute</code> (<a shape="rect" href="chap79_mj.html#X7A00FC8A7A677A56"><span class="RefLink">79.18-3</span></a>) that executes all three assignments simultaneously and protects the variables against overwriting:</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
DeclareAttribute(&quot;PrimesDividingSize&quot;,IsGroup);
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Next we have to install method(s) for the attribute that compute its value. (This is not strictly necessary. We could use the attribute also without methods only for storing and retrieving information, but calling it for objects for which the value is not known would produce a &quot;no method found&quot; error.) For this purpose we can imagine the attribute simply as an one-argument operation:</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
InstallMethod(PrimesDividingSize,&quot;for finite groups&quot;,
  [IsGroup and IsFinite],
function(G)
  if Size(G)=1 then return [];
  else return Set(Factors(Size(G)));fi;
end);
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">The function installed <em>must</em> always return a value (or call <code class="func">TryNextMethod</code> (<a shape="rect" href="chap78_mj.html#X7EED949B83046A7F"><span class="RefLink">78.4-1</span></a>)). If the object is in the representation <code class="code">IsAttributeStoringRep</code> this return value once computed will be automatically stored and retrieved if the attribute is called a second time. We don't have to call setter or tester ourselves. (This storage happens by <strong class="pkg">GAP</strong> internally calling the attribute setter with the return value of the function. Retrieval is by a high-ranking method which is installed under the condition <code class="code">HasPrimesDividingSize</code>. This method was installed automatically when the attribute was declared.)</p> </body>
    </html>