<html> 
      <head>
        <title>GAP (ref) - Chapter 85: Function-Operation-Attribute Triples-&gt;85.1-1 KeyDependentOperation</title>
        <meta name="url" content="http://www.gap-system.org/Manuals/doc/ref/chap85.html#X7CABFDAA8596757E"></meta>
      </head>
      <body> <h5 xmlns="http://www.w3.org/1999/xhtml">85.1-1 KeyDependentOperation</h5><div class="func" xmlns="http://www.w3.org/1999/xhtml"><table width="100%" class="func"><tbody><tr><td colspan="1" rowspan="1" class="tdleft"><code class="func">â€£ KeyDependentOperation</code>( <var class="Arg">name</var>, <var class="Arg">dom-req</var>, <var class="Arg">key-req</var>, <var class="Arg">key-test</var> )</td><td colspan="1" rowspan="1" class="tdright">( function )</td></tr></tbody></table></div><p xmlns="http://www.w3.org/1999/xhtml">There are several functions that require as first argument a domain, e.g., a group, and as second argument something much simpler, e.g., a prime. <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>) is an example. Since its value depends on two arguments, it cannot be an attribute, yet one would like to store the Sylow subgroups once they have been computed.</p><p xmlns="http://www.w3.org/1999/xhtml">The idea is to provide an attribute of the group, called <code class="code">ComputedSylowSubgroups</code>, and to store the groups in this list. The name implies that the value of this attribute may change in the course of a <strong class="pkg">GAP</strong> session, whenever a newly-computed Sylow subgroup is put into the list. Therefore, this is a <em>mutable attribute</em> (see <a shape="rect" href="chap79_mj.html#X7A38E7E87CCCEDD1"><span class="RefLink">79.3</span></a>). The list contains primes in each bound odd position and a corresponding Sylow subgroup in the following even position. More precisely, if <code class="code"><var class="Arg">p</var> = ComputedSylowSubgroups( <var class="Arg">G</var> )[ <var class="Arg">even</var> - 1 ]</code> then <code class="code">ComputedSylowSubgroups( <var class="Arg">G</var> )[ <var class="Arg">even</var> ]</code> holds the value of <code class="code">SylowSubgroup( <var class="Arg">G</var>, <var class="Arg">p</var> )</code>. The pairs are sorted in increasing order of <var class="Arg">p</var>, in particular at most one Sylow <var class="Arg">p</var> subgroup of <var class="Arg">G</var> is stored for each prime <var class="Arg">p</var>. This attribute value is maintained by the function <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>), which calls the operation <code class="code">SylowSubgroupOp( <var class="Arg">G</var>, <var class="Arg">p</var> )</code> to do the real work, if the prime <var class="Arg">p</var> cannot be found in the list. So methods that do the real work should be installed for <code class="code">SylowSubgroupOp</code> and not for <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml">The same mechanism works for other functions as well, e.g., for <code class="func">PCore</code> (<a shape="rect" href="chap39_mj.html#X7CF497C77B1E8938"><span class="RefLink">39.11-3</span></a>), but also for <code class="func">HallSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7EDBA19E828CD584"><span class="RefLink">39.13-3</span></a>), where the second argument is not a prime but a set of primes.</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="func">KeyDependentOperation</code> declares the two operations and the attribute as described above, with names <var class="Arg">name</var>, <var class="Arg">name</var><code class="code">Op</code>, and <code class="code">Computed</code><var class="Arg">name</var><code class="code">s</code>. <var class="Arg">dom-req</var> and <var class="Arg">key-req</var> specify the required filters for the first and second argument of the operation <var class="Arg">name</var><code class="code">Op</code>, which are needed to create this operation with <code class="func">DeclareOperation</code> (<a shape="rect" href="chap79_mj.html#X843F48137B899BC3"><span class="RefLink">79.18-6</span></a>). <var class="Arg">dom-req</var> is also the required filter for the corresponding attribute <code class="code">Computed</code><var class="Arg">name</var><code class="code">s</code>. The fourth argument <var class="Arg">key-test</var> is in general a function to which the second argument <var class="Arg">info</var> of <code class="code"><var class="Arg">name</var>( <var class="Arg">D</var>, <var class="Arg">info</var> )</code> will be passed. This function can perform tests on <var class="Arg">info</var>, and raise an error if appropriate.</p><p xmlns="http://www.w3.org/1999/xhtml">For example, to set up the three objects <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>), <code class="code">SylowSubgroupOp</code>, <code class="code">ComputedSylowSubgroups</code> together, the declaration file <code class="file">lib/grp.gd</code> contains the following line of code.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
KeyDependentOperation( &quot;SylowSubgroup&quot;, IsGroup, IsPosInt, &quot;prime&quot; );
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">In this example, <var class="Arg">key-test</var> has the value <code class="code">&quot;prime&quot;</code>, which is silently replaced by a function that tests whether its argument is a prime.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">s4 := Group((1,2,3,4),(1,2));;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">SylowSubgroup( s4, 5 );;  ComputedSylowSubgroups( s4 );</span>
[ 5, Group(()) ]
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">SylowSubgroup( s4, 2 );;  ComputedSylowSubgroups( s4 );</span>
[ 2, Group([ (3,4), (1,4)(2,3), (1,3)(2,4) ]), 5, Group(()) ]
</pre></div><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">SylowSubgroup( s4, 6 );</span>
Error, SylowSubgroup: &lt;p&gt; must be a prime called from
&lt;compiled or corrupted call value&gt;  called from
&lt;function&gt;( &lt;arguments&gt; ) called from read-eval-loop
Entering break read-eval-print loop ...
you can 'quit;' to quit to outer loop, or
you can 'return;' to continue
<span class="GAPbrkprompt">brk&gt;</span> <span class="GAPinput">quit;</span>
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Thus the prime test need not be repeated in the methods for the operation <code class="code">SylowSubgroupOp</code> (which are installed to do the real work). Note that no methods need be installed for <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>) and <code class="code">ComputedSylowSubgroups</code>. If a method is installed with <code class="func">InstallMethod</code> (<a shape="rect" href="chap78_mj.html#X837EFDAB7BEF290B"><span class="RefLink">78.2-1</span></a>) for a wrapper operation such as <code class="func">SylowSubgroup</code> (<a shape="rect" href="chap39_mj.html#X7AA351308787544C"><span class="RefLink">39.13-1</span></a>) then a warning is signalled provided the <code class="func">InfoWarning</code> (<a shape="rect" href="chap7_mj.html#X7A28F77C82D6A3E0"><span class="RefLink">7.4-7</span></a>) level is at least <code class="code">1</code>. (Use <code class="func">InstallMethod</code> (<a shape="rect" href="chap78_mj.html#X837EFDAB7BEF290B"><span class="RefLink">78.2-1</span></a>) in order to suppress the warning.)</p> </body>
    </html>