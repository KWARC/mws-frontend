<html> 
      <head>
        <title>GAP (ref) - Chapter 85: Function-Operation-Attribute Triples-&gt;85.2-1 InParentFOA</title>
        <meta name="url" content="http://www.gap-system.org/Manuals/doc/ref/chap85.html#X7C0E62D8813A4EE6"></meta>
      </head>
      <body> <h5 xmlns="http://www.w3.org/1999/xhtml">85.2-1 InParentFOA</h5><div class="func" xmlns="http://www.w3.org/1999/xhtml"><table width="100%" class="func"><tbody><tr><td colspan="1" rowspan="1" class="tdleft"><code class="func">‣ InParentFOA</code>( <var class="Arg">name</var>, <var class="Arg">super</var>, <var class="Arg">sub</var>, <var class="Arg">AorP</var> )</td><td colspan="1" rowspan="1" class="tdright">( function )</td></tr></tbody></table></div><p xmlns="http://www.w3.org/1999/xhtml">This section describes how you can add new &quot;in parent attributes&quot; (see <a shape="rect" href="chap31_mj.html#X7B58FDEF80338DD6"><span class="RefLink">31.8</span></a> and <a shape="rect" href="chap31_mj.html#X7CBDD36E7B7BE286"><span class="RefLink">31.7</span></a>). As an example, we describe how <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) and its related functions are implemented.</p><p xmlns="http://www.w3.org/1999/xhtml">There are two operations <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) and <code class="code">IndexOp</code>, and an attribute <code class="code">IndexInParent</code>. They are created together as shown below, and after they have been created, methods need be installed only for <code class="code">IndexOp</code>. In the creation process, <code class="code">IndexInParent</code> already gets one default method installed (in addition to the usual system getter of each attribute, see <a shape="rect" href="chap13_mj.html#X7C701DBF7BAE649A"><span class="RefLink">13.5</span></a>), namely <code class="code">D -&gt; IndexOp( Parent( D ), D )</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">The operation <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) proceeds as follows.</p><ul xmlns="http://www.w3.org/1999/xhtml"><li><p>If it is called with the two arguments <var class="Arg">super</var> and <var class="Arg">sub</var>, and if <code class="code">HasParent( <var class="Arg">sub</var> )</code> and <code class="code">IsIdenticalObj( <var class="Arg">super</var>, Parent( <var class="Arg">sub</var> ) )</code> are <code class="keyw">true</code>, <code class="code">IndexInParent</code> is called with argument <var class="Arg">sub</var>, and the result is returned.</p>

</li><li><p>Otherwise, <code class="code">IndexOp</code> is called with the same arguments that <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) was called with, and the result is returned.</p>

</li></ul><p xmlns="http://www.w3.org/1999/xhtml">(Note that it is in principle possible to install even <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) and <code class="code">IndexOp</code> methods for a number of arguments different from two, with <code class="func">InstallOtherMethod</code> (<a shape="rect" href="chap78_mj.html#X7D2C12DB841CE539"><span class="RefLink">78.2-2</span></a>), see <a shape="rect" href="chap79_mj.html#X7A38E7E87CCCEDD1"><span class="RefLink">79.3</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml">The call of <code class="func">InParentFOA</code> declares the operations and the attribute as described above, with names <var class="Arg">name</var>, <var class="Arg">name</var><code class="code">Op</code>, and <var class="Arg">name</var><code class="code">InParent</code>. <var class="Arg">super-req</var> and <var class="Arg">sub-req</var> specify the required filters for the first and second argument of the operation <var class="Arg">name</var><code class="code">Op</code>, which are needed to create this operation with <code class="func">DeclareOperation</code> (<a shape="rect" href="chap79_mj.html#X843F48137B899BC3"><span class="RefLink">79.18-6</span></a>). <var class="Arg">sub-req</var> is also the required filter for the corresponding attribute <var class="Arg">name</var><code class="code">InParent</code>; note that <code class="func">HasParent</code> (<a shape="rect" href="chap31_mj.html#X7BC856CC7F116BB0"><span class="RefLink">31.7-1</span></a>) is <em>not</em> required for the argument <var class="Arg">U</var> of <var class="Arg">name</var><code class="code">InParent</code>, because even without a parent stored, <code class="code">Parent( <var class="Arg">U</var> )</code> is legal, meaning <var class="Arg">U</var> itself (see <a shape="rect" href="chap31_mj.html#X7CBDD36E7B7BE286"><span class="RefLink">31.7</span></a>). The fourth argument must be <code class="func">DeclareProperty</code> (<a shape="rect" href="chap79_mj.html#X7F4602F082682A04"><span class="RefLink">79.18-4</span></a>) if <var class="Arg">name</var><code class="code">InParent</code> takes only boolean values (for example in the case <code class="code">IsNormalInParent</code>), and <code class="func">DeclareAttribute</code> (<a shape="rect" href="chap79_mj.html#X7A00FC8A7A677A56"><span class="RefLink">79.18-3</span></a>) otherwise.</p><p xmlns="http://www.w3.org/1999/xhtml">For example, to set up the three objects <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>), <code class="code">IndexOp</code>, and <code class="code">IndexInParent</code> together, the declaration file <code class="file">lib/domain.gd</code> contains the following line of code.</p><div class="example" xmlns="http://www.w3.org/1999/xhtml"><pre xml:space="preserve">
InParentFOA( &quot;Index&quot;, IsGroup, IsGroup, DeclareAttribute );
</pre></div><p xmlns="http://www.w3.org/1999/xhtml">Note that no methods need be installed for <code class="func">Index</code> (<a shape="rect" href="chap39_mj.html#X86DC933779B1CABD"><span class="RefLink">39.3-2</span></a>) and <code class="code">IndexInParent</code>.</p> </body>
    </html>